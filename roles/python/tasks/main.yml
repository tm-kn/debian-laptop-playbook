---
- name: install python3
  package:
    name: python3
    state: latest
  become: true

- name: install python3-pip
  package:
    name: python3-pip
    state: latest
  become: true

- name: install python3-dev
  package:
    name: python3-dev
    state: latest
  become: true

- name: install python3-venv
  package:
    name: python3-venv
    state: latest
  become: true

- name: install python linters
  package:
    name: python3-flake8
    state: latest
  become: true

- name: install tox
  package:
    name: tox
    state: latest
  become: true

- name: install twine
  package:
    name: twine
    state: latest
  become: true

- name: install python
  package:
    name: python
    state: latest
  become: true

- name: install python-pip
  package:
    name: python-pip
    state: latest
  become: true

- name: install python-dev
  package:
    name: python-dev
    state: latest
  become: true

# for things installed with pip install --user
- name: add local bin directory to path
  blockinfile:
    path: "{{ ansible_env.HOME }}/.bashrc"
    marker: "# {mark} - PIP USER BIN PATH - ANSIBLE MANAGED BLOCK"
    block: |
      export PATH=~/.local/bin:$PATH

- name: install awscli from pip
  pip:
    name: awscli
    state: latest
    extra_args: --user
